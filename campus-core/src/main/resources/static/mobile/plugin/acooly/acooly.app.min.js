(function($){var acooly_app={isMobile:function(){var userAgentInfo=navigator.userAgent;var mobileAgents=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"];var mobile_flag=false;for(var v=0;v<mobileAgents.length;v++){if(userAgentInfo.indexOf(mobileAgents[v])>0){mobile_flag=true;break;}}var screen_width=window.screen.width;var screen_height=window.screen.height;if(screen_width<500&&screen_height<800){mobile_flag=true;}return mobile_flag;},getDeviceType:function(){if(!this.isMobile()){return"pc";}var userAgent=navigator.userAgent;var p=navigator.platform;var isAndroid=userAgent.indexOf("Android")>-1||userAgent.indexOf("Linux")>-1;var isiOS=!!userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);if(isAndroid==true){return"android";}if(isiOS==true){return"ios";}return"other";},setupNativeToWebBridge:function(callback){var deviceType=this.getDeviceType();console.info("deviceType",deviceType);if(deviceType=="ios"){if(window.WKWebViewJavascriptBridge){return callback(WKWebViewJavascriptBridge);}if(window.WKWVJBCallbacks){return window.WKWVJBCallbacks.push(callback);}window.WKWVJBCallbacks=[callback];window.webkit.messageHandlers.iOS_Native_InjectJavascript.postMessage(null);}else{if(deviceType=="android"){}else{}}},webCallNative:function(opts){var defOpts={element:null,event:null,service:null,jsonData:null,onComplete:null};var options=$.extend(defOpts,opts);this.setupNativeToWebBridge(function(bridge){console.info("call app:"+JSON.stringify(options));$(options.element).on(options.event,function(){var data=$.extend({service:options.service},options.jsonData);bridge.callHandler("awake",data,function(response){if(options.onComplete!=null){options.onComplete.call(this,response);}});});});},nativeCallWeb:function(opts){}};$.extend($.acooly,{app:acooly_app});})(jQuery);